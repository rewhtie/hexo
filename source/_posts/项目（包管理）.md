---
title: 项目（包管理）
date: 2023-06-07 16:05:38
tags: 项目搭建
---

项目安装依赖准备、总结遇到的问题

<!-- more -->

### <font color="#08c">nrm镜像源管理工具

安装成功，但是nrm ls查看源的时候，报以下错误

``` bash
Error [ERR_REQUIRE_ESM]: require() of ES Module D:\npm\node_modules\nrm\node_modules\open\index.js from D:\npm\node_modules\nrm\cli.js not supported.
Instead change the require of index.js in D:\npm\node_modules\nrm\cli.js to a dynamic import() which is available in all CommonJS modules.
at Object. (D:\npm\node_modules\nrm\cli.js:9:14) {
code: 'ERR_REQUIRE_ESM'
}
```

原因：应该使用 open 的 CommonJs规范的包 ，现在 open v9.0.0 是 ES Module 版本的包

解决方法：<font color="#08c">npm install -g nrm open@8.4.2 --save</font> 安装指定版本的包

``` bash
# 获取镜像
nrm ls
# 使用镜像
nrm use
```

### <font color="#08c">pnpm使用</font>

pnpm install 提示报错一些依赖没有成功安装上的时候，项目根目录建.npmrc文件，复制以下代码

```ts
shamefully-hoist: true
```

官网说明：提升至根模块目录中意味着应用代码可以访问到幻影依赖，即使他们对解析策略做了不当的修改。当处理一些有缺陷的可插拔工具不能正确解析依赖关系时，此设置很有用。
补充：[npmrc官网](https://pnpm.io/zh/npmrc)

### <font color="#08c">nvm版本管理工具</font>

#### node安装成功，npm报错、提示找不到命令

需要手动下载与node对应版本的npm

npm下载地址：http://npm.taobao.org/mirrors/npm/ （下载对应版本的zip文件）
node版本对应npm版本：https://nodejs.org/zh-cn/download/releases/

最后将下载的npm文件夹里面的bin目录下的npm和npm.cmd两个文件复制一份到对应node版本的根目录下。

### <font color="#08c">rimraf快速删除文件</font>

``` bash
$ npm install rimraf -g
$ rimraf node_modules #删除node_modules, 管你什么权限不够、资源文件占用, 我给你通通删除
```

### <font color="#08c">node-sass 版本对应</font>

``` bash
ERR! gyp ERR! cwd D:\workspace\node_modules\node-sass
```

nodejs与node-sass版本不匹配

``` bash
# node与node-sass版本对应表
# node版本 node-sass版本
node 16——6.0+
node 15——5.0+
node 14——4.14+
node13—— 4.13+,<5.0
node12—— 4.12+
node11—— 4.10+,<5.0
node10—— 4.9+,<5.0
node8——4.5.3+,<5.0
node<8—— <5.0

# sass-loader与node-sass版本对应表
# sass-loader版本 node-sass版本
sass-loader 4.1.1—— node-sass 4.3.0
sass-loader 7.0.3—— node-sass 4.7.2
sass-loader 7.3.1—— node-sass 4.7.2
sass-loader 7.3.1—— node-sass 4.14.1
sass-loader 10.0.1—— node-sass 6.0.1
```