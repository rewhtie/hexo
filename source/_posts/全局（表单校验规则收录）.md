---
layout: post
title: 全局（表单校验规则收录）
date: 2023-10-26 16:00:49
tags: 
  - 全局函数
  - 正则
categories: 函数
---

适用表单组件的校验规则收录, 表单规则使用rules直接集合封装

<!-- more -->
#### 手机号码、验证码
```ts
const phoneRules = {
  phone: [
    { required: true, message: '请输入手机号码', trigger: ['blur', 'change'] },
    { pattern: /^1[3456789]\d{9}$/, message: '手机号码格式不正确', trigger: ['blur', 'change'] }
  ],
  code: [
    { required: true, message: '请输入验证码', trigger: ['blur', 'change'] },
    { pattern: /^\d{6}$/, message: '验证码格式不正确', trigger: ['blur', 'change'] }
  ]
}
```

#### 账号密码
```ts
const passRules = {
  passOld: [{ required: true, message: '请输入原密码', trigger: ['blur', 'change'] }],
  passNew: [
    { required: true, min: 6, max: 16, message: '请输入新密码', trigger: ['blur', 'change'] },
    {
      pattern: /^(?=.*\d)(?=.*[a-zA-Z])(?=.*[^\da-zA-Z\s]).{6,16}$/,
      message: '密码需要字母、数字、特殊符号组合且长度在6到16位',
      trigger: ['blur', 'change']
    }
  ],
  passNewSame: [
    { 
      required: true, 
      validator: (rule, value, callback) => {
        if (value === '') {
          callback(new Error('请再次输入密码'))
        } else if (value !== this.form.passNew) {
          callback(new Error('两次输入密码不一致!'))
        } else {
          callback()
        }
      }, 
      trigger: ['blur', 'change'] 
    },
  ]
}
```
<!-- more -->