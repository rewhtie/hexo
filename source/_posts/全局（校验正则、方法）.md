---
title: 校验正则、方法
data: 2022-02-25 13:00
tags: 
- 正则
- 全局函数
---

input框常用，表单校验常用，列举一些实用复用性高的正则表达式和一些校验方法

<!-- more -->

## **正则**

```ts
.test('变量')：

 const passwordFormat = /^[^\u4E00-\u9FA5\uF900-\uFA2D\u0020]{8,16}$/; //限制中文和空格及长度范围8-16

 const regExpNumber = new RegExp("^[0-9]*$"); //校验数字类型

 const passwordZaZ0 = new RegExp("(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{6,18}"); //数字+字母+特殊字符

 const regExpNumber = new RegExp("^[0-9]*$"); //校验数字类型

 const isExternal = /^(https?:|mailto:|tel:)/; //判断是否是外链
```


## **方法**

```ts
// 去空格两边空格
export const trim = (str) => {
  // 不等于字符串就返回原值
  if (typeof str !== "string") return str;
  return str.replace(/^\s*|\s*$/g, "");
};

/**
 * 密码校验
 * @param {Object} rule 校验的默认值
 * @param {string} value 校验的默认值
 * @returns {Promise}
 */

export const verifyPassword = (rule, value) => {
  if (!trim(value)) {
    return Promise.reject("请输入密码");
  } else if (!passwordFormat.test(value)) {
    return Promise.reject(TIPS.IS_PASSWORD);
  }
  return Promise.resolve();
};

/**
 * 校验名称在2-20字符
 * @param {boolean} bool true：必填 false：非必填
 * @returns {Promise}
 */
export const verifyName = (bool = false, hint = "该值必填") => {
  return (rule, value) => {
    value = trim(value);
    if (!value && bool) {
      return Promise.reject(hint);
    } else if (value && (2 > value.length || value.length > 20)) {
      return Promise.reject(TIPS.IS_NAME);
    }
    return Promise.resolve();
  };
};

/**
 * 备注长度 限制在 64个字符内
 * @param {Object} rule 校验的默认值
 * @param {string} value 校验的默认值
 * @returns {Promise}
 */
export const remarkLength = (rule, value) => {
  value = trim(value);
  if (value && value.length > 64) {
    return Promise.reject(TIPS.IS_REMARK);
  }
  return Promise.resolve();
};

// 校验英文
export const verifyEN = (rule, value) => {
  const regExp = /^[A-Za-z][A-Za-z_0-9]+$/;

  if (!value) {
    return Promise.reject(TIPS.IS_EMPTY);
  }
  if (!regExp.test(value)) {
    return Promise.reject(TIPS.IS_EN);
  } else {
    return Promise.resolve();
  }
};

// 校验中文
export const verifyCN = (rule, value) => {
  const regExp = /^[\u4E00-\u9FA5]+$/;
  if (!value) {
    return Promise.reject(TIPS.IS_EMPTY);
  }
  if (!regExp.test(value)) {
    return Promise.reject(TIPS.IS_CN);
  } else {
    return Promise.resolve();
  }
};

/**
 * 手机号验证
 * @param {Object} rule 校验的默认值
 * @param {string} value 校验的默认值
 * @returns {Promise}
 */
export const verifyPhone = (rule, value) => {
  let regFormat = /^1[3456789]\d{9}$/; //正确手机号
  value = trim(value);
  if (!value) {
    return Promise.reject("请输入手机号码");
  }
  if (!regFormat.test(value)) {
    return Promise.reject("请输入正确手机号");
  } else {
    return Promise.resolve();
  }
};
//数字验证
export const verifyNumber = (rule, value) => {
  if (!value) {
    return Promise.reject(TIPS.IS_EMPTY);
  }
  if (!Number.isInteger(value)) {
    return Promise.reject(TIPS.IS_NUMB);
  } else {
    if (value < 18) {
      return Promise.reject("必须大于18岁");
    } else if (value > 55) {
      return Promise.reject("必须小于55岁");
    } else {
      return Promise.resolve();
    }
  }
};

// 判断是否数字
export const isNum = (value) => {
  let regFormat = /^\d+(\.\d+)?$/;
  if (value !== "" && !regFormat.test(String(value))) {
    return false;
  }
  return true;
};

// 数字校验
export const verifyNum = (bool = false, hint = TIPS.IS_NUMB) => {
  return (rule, value) => {
    // 只能输入数字
    if (!value && value != 0 && bool) {
      return Promise.reject(hint);
    } else if (!isNum(value)) {
      return Promise.reject(hint);
    }
    return Promise.resolve();
  };
};
//邮箱
export const verifyEmail = (rule, value) => {
  let mal = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  if (!value) {
    return Promise.reject(TIPS.IS_EMPTY);
  }
  if (!mal.test(value)) {
    return Promise.reject(TIPS.IS_EMAIL);
  } else {
    return Promise.resolve();
  }
};
//QQ号码验证
export const verifyQQV = (rule, value) => {
  if (value === "") {
    return Promise.reject("输入QQ号");
  } else if (/^[1-9][0-9]{4,10}$/.test(value)) {
    return Promise.resolve();
  } else {
    return Promise.reject("输入正确的QQ号");
  }
};

// 类似金钱,首位不为0,最多2位小数
export const verifyCheckNumPot2 = (rule, value) => {
  const reg = /(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/;
  if (!value) {
    return Promise.reject(TIPS.IS_EMPTY);
  } else if (!reg.test(value)) {
    return Promise.reject("请填写数字,最多2位小数");
  } else {
    return Promise.resolve();
  }
};

// 身份证
export const verifyCheckIdNum = (rule, value) => {
  const reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
  if (!value) {
    return Promise.reject("证件号码不能为空");
  } else if (!reg.test(value)) {
    return Promise.reject("证件号码不正确");
  } else {
    return Promise.resolve();
  }
};

// 整数
export const verifyCheckInterNum = (rule, value) => {
  const reg = /^[0-9]*[1-9][0-9]*$/;
  if (!value) {
    return Promise.reject(TIPS.IS_EMPTY);
  } else if (!reg.test(value)) {
    return Promise.reject(TIPS.IS_INTEGER);
  } else {
    return Promise.resolve();
  }
};

// 只支持数字和小数点（小数点后最多1位，20字以内）
export const regMoney = /^([1-9]\d{0,9}|0)(\.\d{1})?$/;
export const verifyMoney = (rule, value) => {
  if (!regMoney.test(value)) {
    return Promise.reject(TIPS.IS_MONEY);
  } else {
    return Promise.resolve();
  }
};

// 校验省市区
export const verifyAddress = (rule, value) => {
  if (rule.field == "provinceId" && !value) {
    return Promise.reject("请选择省份");
  } else if (rule.field == "cityId" && !value) {
    return Promise.reject("请选择城市");
  } else if (rule.field == "areaId" && !value) {
    return Promise.reject("请选择区");
  } else {
    return Promise.resolve();
  }
};export const trim = (str) => {
  // 不等于字符串就返回原值
  if (typeof str !== "string") return str;
  return str.replace(/^\s*|\s*$/g, "");
};


```


 
<!-- more -->    
